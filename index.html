<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HRG PC Builder – Live Inventory & Quotes</title>
  <style>
    body {
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Helvetica Neue, Arial, sans-serif;
      background: #0f1115;
      color: #e6e9ef;
      margin: 0;
      padding: 24px;
    }
    h1 { margin-top: 0; }
    .btn { padding: 10px 16px; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; transition: 0.2s; }
    .primary { background: linear-gradient(90deg,#4c6fff,#7aa2ff); color: #fff; }
    .ghost { background: #1b2030; color: #fff; }
    input, select {
      width: 100%;
      padding: 8px 10px;
      margin-bottom: 10px;
      border-radius: 8px;
      border: 1px solid #2a3042;
      background: #151823;
      color: #e6e9ef;
    }
    label { font-size: 13px; color: #aab1c4; display: block; margin-top: 6px; }
    .tiny { font-size: 12px; color: #aab1c4; }
  </style>
</head>
<body>
  <h1>HRG PC Builder – Live Inventory & Quotes</h1>
  <p class="tiny">Firebase and live pricing backend are pre-configured.</p>

  <button id="btnTest" class="btn primary">Test Connection</button>
  <pre id="output" style="margin-top:16px;background:#151823;padding:12px;border-radius:8px;"></pre>

  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js"></script>

  <script>
  // ---------- Firebase Config (baked in) ----------
  const firebaseConfig = {
    apiKey: "AIzaSyCVXsMYLXlGrAuLWFnLe21IfV2a_vLdi-o",
    authDomain: "hrg-pc-build.firebaseapp.com",
    projectId: "hrg-pc-build",
    storageBucket: "hrg-pc-build.firebasestorage.app",
    messagingSenderId: "846697611824",
    appId: "1:846697611824:web:eb58f939302d1b230ba3f5"
  };

  // ---------- Safe Initialization ----------
  if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
  } else {
    firebase.app();
  }

  const db = firebase.firestore();
  const storage = firebase.storage();

  // ---------- Cloud Function Endpoints ----------
  const FN_PRICE = "https://us-central1-hrg-pc-build.cloudfunctions.net/priceSync";
  const FN_SUGGEST = "https://us-central1-hrg-pc-build.cloudfunctions.net/stockSuggest";
  const FN_RESERVE = "https://us-central1-hrg-pc-build.cloudfunctions.net/reservePart";

  // ---------- Quick test ----------
  document.getElementById("btnTest").onclick = async () => {
    const out = document.getElementById("output");
    out.textContent = "Testing connection...";

    try {
      // simple Firestore test
      const testDoc = await db.collection("parts").limit(1).get();
      const count = testDoc.size;
      // simple backend test
      const res = await fetch(FN_PRICE + "?sku=RTX_4070_SUPER");
      const text = await res.text();
      out.textContent =
        "✅ Firebase Initialized\n" +
        "✅ Firestore Connected (found " + count + " docs)\n" +
        "✅ Function Response (priceSync):\n" + text;
    } catch (err) {
      out.textContent = "❌ Error: " + err.message;
      console.error(err);
    }
  };
  </script>
</body>
</html>
